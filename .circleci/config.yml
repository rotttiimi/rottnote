version: 2
jobs:
  build:
    working_directory: ~/rottnote
    docker:
      - image: circleci/node:6.10.3
    steps:
      - checkout
      - run:
          name: Install now
          command: sudo npm install now --global
      - run:
          name: Install rottnote React App Dependencies
          working_directory: ~/rottnote/client
          command: npm install
      - run:
          name: Build Production Optimized rottnote React App
          working_directory: ~/rottnote/client
          command: npm run build
      - run:
          name: Deploy rottnote Using now
          command: now -e NODE_ENV=production -e DB_URI=${DB_URI} -t ${NOW_TOKEN}
